<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://www.lunasdk.org/manual/basics/strings/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Strings - Luna SDK Docs</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Strings";
        var mkdocs_page_input_path = "manual\\basics\\strings.md";
        var mkdocs_page_url = "/manual/basics/strings/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Luna SDK Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../license/">License</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../roadmap/">Roadmap</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Manual</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Introduction</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../introduction/getting_started/">Getting Started</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Basics</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../">Basics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../coding_convention/">Coding Convention</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../initialization_and_shutdown/">Initialization and Shutdown</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../basic_types/">Basic Types</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Strings</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#string-types">String types</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#string-utility-library">String utility library</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#unicode-encoding-library">Unicode encoding library</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#base64-encoding-library">Base64 encoding library</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../memory_management/">Memory Management</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../modules/">Modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../variants/">Variants</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../type_system/">Type System</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../serialization_and_deserialization/">Serialization and Deserialization</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../boxed_objects/">Boxed Objects</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../interfaces/">Interfaces</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../error_handling/">Error Handling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../assertions/">Assertions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../file_management/">File Management</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../thread_and_synchronization_objects/">Thread and Synchronization Objects</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../time/">Time</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../logs/">Logs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../math_library/">Math Library</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Luna SDK Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Manual &raquo;</li>
          <li>Basics &raquo;</li>
      <li>Strings</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="strings">Strings</h1>
<p>Strings are sequences of characters represented by <code>c8</code>, <code>c16</code> and <code>c32</code>, terminated by a null terminator (<code>\0</code>). Luna SDK provides various string types and libraries, they will be discussed in this section.</p>
<h2 id="string-types">String types</h2>
<pre><code class="language-c++">#include &lt;Runtime/String.hpp&gt; // For String, String16 and String32.
#include &lt;Runtime/Name.hpp&gt; // For Name.
</code></pre>
<p>Luna SDK provides two kinds of string types: <code>String</code> and <code>Name</code>.</p>
<p>The <code>String</code> type is a sequence of <code>c8</code> characters ended with <code>\0</code>. We designed <code>String</code> as a replacement of <code>std::string</code> in Luna SDK, so most methods used for <code>std::string</code> should work find with our <code>String</code> type. Besides the <code>String</code> type, we also have <code>String16</code> and <code>String32</code> as replacements for <code>std::u16string</code> and <code>std::u32string</code> that holds character sequences of <code>c16</code> and <code>c32</code> types.</p>
<p>The <code>Name</code> type represents one immutable <code>c8</code> string that is usually used as an identifier. We implemented a global name registry in Luna SDK so that every unique name will have only one data copy in the registry, and all <code>Name</code> objects with the same string data refers to that copy, thus can be compared for equality quickly. The name string data is reference counted, and will be freed when the last <code>Name</code> object that refers to the data is destructed. Strings stored in <code>Name</code> cannot be changed, if the user assigns <code>Name</code> with another string, the <code>Name</code> object will refer to another string data entry, remaining the original string entry unchanged.</p>
<p><code>Name</code> and <code>String</code> can be converted to each other implicitly. There is no enforced encoding format for string types, but most text processing APIs in Luna SDK expects UTF-8 encoded strings for <code>String</code> and <code>Name</code> types.</p>
<h2 id="string-utility-library">String utility library</h2>
<pre><code class="language-c++">#include &lt;Runtime/StringUtils.hpp&gt;
</code></pre>
<p>The string utility library provides functions for processing characters and strings. Luna SDK imports the following string and character processing functions from C standard library that can be used directly in Luna SDK:</p>
<ol>
<li><code>strncpy</code></li>
<li><code>strcat</code></li>
<li><code>strncat</code></li>
<li><code>strxfrm</code></li>
<li><code>strncmp</code></li>
<li><code>strcoll</code></li>
<li><code>strchr</code></li>
<li><code>strrchr</code></li>
<li><code>strspn</code></li>
<li><code>strpbrk</code></li>
<li><code>strstr</code></li>
<li><code>strtok</code></li>
<li><code>isalnum</code></li>
<li><code>isalpha</code></li>
<li><code>islower</code></li>
<li><code>isupper</code></li>
<li><code>tolower</code></li>
<li><code>toupper</code></li>
<li><code>isdigit</code></li>
<li><code>isxdigit</code></li>
<li><code>iscntrl</code></li>
<li><code>isgraph</code></li>
<li><code>isspace</code></li>
<li><code>isblank</code></li>
<li><code>isprint</code></li>
<li><code>ispunct</code></li>
</ol>
<p><code>strlen</code>, <code>strcpy</code> and <code>strcmp</code> are compatible to C standard library, but are extended by Luna SDK so they handles all character types. <code>strcmp_prefix</code> checks whether one string is the prefix string of another string, and returns <code>0</code> if is. <code>strtoi64</code>, <code>strtou64</code> and <code>strtof64</code> interprets one number value presented the by string, and returns the value.</p>
<h2 id="unicode-encoding-library">Unicode encoding library</h2>
<pre><code class="language-c++">#include &lt;Runtime/UTF8.hpp&gt;
</code></pre>
<p><a href="https://home.unicode.org/">Unicode</a> is a text encoding standard that is widely used in modern computers, programs and websites. Luna SDK comes with a built-in Unicode library for processing strings encoded in commonly-used Unicode formats, including UTF-8, UTF-16 (LE and GE) and UTF-32.</p>
<p>Luna SDK uses 32-bit character type (<code>c32</code>) to represent one Unicode character, the value of the character object represents the codepoint of the character in Unicode character table. One Unicode character can be encoded to 1 <code>c32</code> character in UTF-32, 1 to 2 <code>c16</code> characters in UTF-16, and 1 to 6 <code>c8</code> characters in UTF-8.</p>
<blockquote>
<p>By definition, one Unicode character represented by <code>c32</code> differs from one Unicode character encoded using UTF-32 (the first bit of one UTF-32 character must be 0, so only 2^32 Unicode codepoints can be represented in UTF-32). But in practice, all existing Unicode characters can be converted to their UTF-32 representation without any modification, so we do not differ one Unicode character from one UTF-32 character in this manual.</p>
</blockquote>
<p><code>utf8_charspan</code> and <code>utf16_charspan</code> take one Unicode character, and return the number of <code>c8</code>  or <code>c16</code> characters required to represent that character in UTF-8 or UTF-16 encoding. <code>utf8_charlen</code> and <code>utf16_charlen</code> take the first <code>c8</code>  or <code>c16</code>  character of one UTF-8 or UTF-16 encoded Unicode character, and return the number of bytes used for that character. These functions can be used to measure the size of one UTF-32 character in UTF-8 and UTF-16 encoding.</p>
<p><code>utf8_strlen</code> and <code>utf16_strlen</code> calculate the number of Unicode characters contained by a UTF-8 or UTF-16 encoded string, <code>utf8_index</code> and <code>utf16_index</code> return the index of the first <code>c8</code> or <code>c16</code> character of the <code>n</code>th Unicode character in a UTF-8 or UTF-16 ebcided string. These functions can be used to calculate the length of Unicode-encoded strings.</p>
<p><code>utf8_encode_char</code> and <code>utf16_encode_char</code> encode one Unicode character into multiple <code>c8</code> or <code>c16</code> characters using UTF-8 or UTF-16 encoding, write the encoded characters to the user-provided buffer, and return the number of characters written.  <code>utf8_decode_char</code> and <code>utf16_decode_char</code>, on the other side, read multiple <code>c8</code> or <code>c16</code> characters from the user-provided buffer, and returns the Unicode character represented by these characters.</p>
<p><code>utf16_to_utf8</code> converts a UTF-8 encoded string to a UTF-16 encoded string, and <code>utf8_to_utf16</code> converts a UTF-16 encoded string to a UTF-8 encoded string. Both functions write result strings in a user-provided buffer, <code>utf16_to_utf8_len</code> and <code>utf8_to_utf16_len</code> can be used to calculate the minimum size (measured in number of <code>c8</code> or <code>c16</code> characters, not including the null terminator) required for the buffer to hold the result string.</p>
<h2 id="base64-encoding-library">Base64 encoding library</h2>
<pre><code class="language-c++">#include &lt;Runtime/Base64.hpp&gt;
</code></pre>
<p><a href="https://en.wikipedia.org/wiki/Base64">Base64</a> is an encoding format that represents arbitrary binary data using 64 printable characters, plus one character (<code>=</code>) for paddings. It is useful to store binary data in a text-based file. Luna SDK comes with a built-in Base64 library for encoding and decoding binary data using Base64.</p>
<p><code>base64_encode</code> encodes the binary data in the user-provided source buffer to a Base64 encoded string, and writes the string to the user-provided destination buffer. To determine the size of the destination buffer required, call <code>base64_get_encoded_size</code> with the size of the row binary data.</p>
<p><code>base64_decode</code> decodes the Base64 string in the user-provided source buffer to original binary data, and writes the binary data to the user-provided destination buffer. To determine the size of the destination buffer required, call <code>base64_get_decoded_size</code> with the size of the Base64 string, excluding the null terminator.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../basic_types/" class="btn btn-neutral float-left" title="Basic Types"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../memory_management/" class="btn btn-neutral float-right" title="Memory Management">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../basic_types/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../memory_management/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
